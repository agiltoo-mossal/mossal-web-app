<div class="container">
  <div class="container-title-setting">
    <span>Avance sur √©v√©nement</span>
  </div>
  <div class="avance-evenement-container">
    <!-- Section Activation du service -->
    <div class="section flex-center">
      <h3>Activation du service</h3>
      <app-toggle-slide
        [firstText]="'Actif'"
        [secondText]="'Inactif'"
        (value)="(activated ?? false)"
        [uniqueId]="'serviceActivationEvent'"
        (toggleChange)="onServiceActivationChange($event)"
      ></app-toggle-slide>
    </div>
    <div class="toggle-side" [ngClass]="{ grise: !activated }">
      <!-- Liste des √©v√©nements pr√©vus -->
      <div class="section">
        <h3>Liste des √©v√©nements pr√©vus</h3>
        <ul class="event-list">
          <li *ngFor="let event of events; let i = index" class="event-item">
            <div class="event-title">
              <app-toggle-slide
                [firstText]="'Actif'"
                [secondText]="'Inactif'"
                [uniqueId]="'event-' + i"
              ></app-toggle-slide>
              <span>{{ event.title }}</span>
            </div>
            <div class="event-date">
              <input type="date" [value]="event.startDate" disabled/>
              <input type="date" [value]="event.endDate" disabled/>
            </div>
            <div class="event-action">
              <button class="edit-btn" (click)="updateEvent(event)">‚úèÔ∏è</button>
              <button class="delete-btn" (click)="deleteEvent(event)">  üóëÔ∏è</button>
            </div>
          </li>
        </ul>
        <div class="container-button">
          <button class="add-event-btn" (click)="createEvent()">
            Ajouter un √©v√©nement
          </button>
        </div>
      </div>

      <!-- Section des param√®tres -->
      <div class="section">
        <div class="category-selection">
          <select formControlName="selectedCategory">
            <option value="" disabled selected>Toutes les cat√©gories</option>
            <option
              *ngFor="let categorie of categories"
              [value]="categorie?.id"
            >
              {{ categorie?.title }}
            </option>
          </select>
        </div>

        <mat-tab-group
          animationDuration="0ms"
          (selectedTabChange)="onTabChange($event)"
        >
          <mat-tab
            *ngFor="let categorie of categories"
            [label]="categorie?.title"
          >
            <app-setting
              [data]="info"
              [categorie]="categorie"
              (serviceActivationChange)="handleServiceActivationChange($event)"
              (amountTypeChange)="handleAmountTypeChange($event)"
              (reimbursementChange)="handleReimbursementChange($event)"
              (validationChange)="handleValidationChange($event)"
            ></app-setting>
          </mat-tab>
        </mat-tab-group>
      </div>
      <button (click)="saveSettings()" class="validate-btn">Valider</button>
    </div>
  </div>
</div>
